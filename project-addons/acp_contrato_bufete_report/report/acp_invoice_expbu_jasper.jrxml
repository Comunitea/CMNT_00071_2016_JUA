<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="acp_account_invoice_jasper" language="groovy" pageWidth="595" pageHeight="842" columnWidth="515" leftMargin="60" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="OPENERP_RELATIONS" value="[&apos;line_sum_id&apos;]"/>
	<parameter name="SUBREPORT_VENCIMIENTOS" class="java.lang.Object"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString language="xPath">
		<![CDATA[]]>
	</queryString>
	<field name="factura-id" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/id]]></fieldDescription>
	</field>
	<field name="company-logo" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Logo-logo]]></fieldDescription>
	</field>
	<field name="company-nombre" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Nombre_de_la_compania-name]]></fieldDescription>
	</field>
	<field name="company-cif" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/ID_de_impuesto-vat]]></fieldDescription>
	</field>
	<field name="company-calle1" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Calle-street]]></fieldDescription>
	</field>
	<field name="company-ciudad" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Ciudad-city]]></fieldDescription>
	</field>
	<field name="company-pais" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Pais-country_id/Nombre_del_pais-name]]></fieldDescription>
	</field>
	<field name="company-calle2" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Calle2-street2]]></fieldDescription>
	</field>
	<field name="company-provincia" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Provincia-state_id/Nombre_provincia-name]]></fieldDescription>
	</field>
	<field name="company-cp" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/C.P.-zip]]></fieldDescription>
	</field>
	<field name="company-nif" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Empresa-partner_id/NIF-vat]]></fieldDescription>
	</field>
	<field name="company-email" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Email-email]]></fieldDescription>
	</field>
	<field name="company-phone" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Telefono-phone]]></fieldDescription>
	</field>
	<field name="company-website" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Sitio_web-website]]></fieldDescription>
	</field>
	<field name="company-marca_agua" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Marca_de_Agua-marca_agua]]></fieldDescription>
	</field>
	<field name="company-datos_registro" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Registro_de_compania-company_registry]]></fieldDescription>
	</field>
	<field name="customer-ciudad" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/Ciudad-city]]></fieldDescription>
	</field>
	<field name="customer-pais" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/Pais-country_id/Nombre_del_pais-name]]></fieldDescription>
	</field>
	<field name="customer-nombre" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/Nombre-name]]></fieldDescription>
	</field>
	<field name="customer-phone" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/Telefono-phone]]></fieldDescription>
	</field>
	<field name="customer-provincia" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/Provincia-state_id/Nombre_provincia-name]]></fieldDescription>
	</field>
	<field name="customer-calle1" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/Calle-street]]></fieldDescription>
	</field>
	<field name="customer-calle2" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/Calle2-street2]]></fieldDescription>
	</field>
	<field name="customer-nif" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/NIF-vat]]></fieldDescription>
	</field>
	<field name="customer-cp" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/C.P.-zip]]></fieldDescription>
	</field>
	<field name="total-impuesto" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Impuesto-amount_tax]]></fieldDescription>
	</field>
	<field name="total-factura" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Total-amount_total]]></fieldDescription>
	</field>
	<field name="total-baseimponible" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Subtotal-amount_untaxed]]></fieldDescription>
	</field>
	<field name="factura-fecha" class="java.util.Date">
		<fieldDescription><![CDATA[/data/record/Fecha_factura-date_invoice]]></fieldDescription>
	</field>
	<field name="factura-dpp" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Desc._P.P.-early_payment_discount]]></fieldDescription>
	</field>
	<field name="factura-referencia" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Referencia___Descripcion-name]]></fieldDescription>
	</field>
	<field name="factura-numero" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Numero-number]]></fieldDescription>
	</field>
	<field name="factura-origen" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Documento_origen-origin]]></fieldDescription>
	</field>
	<field name="factura-tipo_contrato" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Expediente-dft_contrato_id/Tipo_de_Expediente-tipo_contrato/Nombre-name]]></fieldDescription>
	</field>
	<field name="factura-comercial_nombre" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Comercial-user_id/Name-name]]></fieldDescription>
	</field>
	<field name="factura-comercial_display_name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Comercial-user_id/Name-display_name]]></fieldDescription>
	</field>
	<field name="linea-descuento" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Lineas_de_factura-invoice_line/Descuento-discount]]></fieldDescription>
	</field>
	<field name="linea-descripcion" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Lineas_de_factura-invoice_line/Descripcion-name]]></fieldDescription>
	</field>
	<field name="linea-subtotal" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Lineas_de_factura-invoice_line/Importe-price_subtotal]]></fieldDescription>
	</field>
	<field name="linea-precio" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Lineas_de_factura-invoice_line/Precio_unidad-price_unit]]></fieldDescription>
	</field>
	<field name="linea-referencia" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Lineas_de_factura-invoice_line/Producto-product_id/Referencia_interna-code]]></fieldDescription>
	</field>
	<field name="linea-cantidad" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Lineas_de_factura-invoice_line/Cantidad-quantity]]></fieldDescription>
	</field>
	<field name="linea-impuesto_nombre" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Lineas_de_factura-invoice_line/Impuestos-invoice_line_tax_id/Nombre_impuesto-name]]></fieldDescription>
	</field>
	<field name="Simbolo_moneda" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Divisa-currency_id/Simbolo-symbol]]></fieldDescription>
	</field>
	<field name="Nombre_del_banco-bank_name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Cuentas_bancarias-bank_ids/Nombre_del_banco-bank_name]]></fieldDescription>
	</field>
	<field name="IBAN-iban" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Compania-company_id/Cuentas_bancarias-bank_ids/IBAN-iban]]></fieldDescription>
	</field>
	<field name="Plazo_de_pago-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Plazos_de_pago-payment_term/Plazo_de_pago-name]]></fieldDescription>
	</field>
	<field name="Titulo-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Empresa-partner_id/Titulo-title/Titulo-name]]></fieldDescription>
	</field>
	<field name="Producto-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/Lineas-line_sum_id/Producto-name]]></fieldDescription>
	</field>
	<field name="Cantidad-qty" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Lineas-line_sum_id/Cantidad-qty]]></fieldDescription>
	</field>
	<field name="Subtotal-subtotal" class="java.lang.Double">
		<fieldDescription><![CDATA[/data/record/Lineas-line_sum_id/Subtotal-subtotal]]></fieldDescription>
	</field>
	<variable name="TOTAL_BRUTO" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{linea-referencia}.equals( "DPP" )?0:$F{linea-subtotal}]]></variableExpression>
	</variable>
	<variable name="IMPORTE_DPP" class="java.lang.Double">
		<variableExpression><![CDATA[$V{TOTAL_BRUTO} - $F{total-baseimponible}]]></variableExpression>
	</variable>
	<background>
		<band height="802" splitType="Stretch">
			<image>
				<reportElement x="100" y="230" width="340" height="340"/>
				<imageExpression class="java.lang.String"><![CDATA[$F{company-marca_agua}]]></imageExpression>
			</image>
		</band>
	</background>
	<pageHeader>
		<band height="250" splitType="Stretch">
			<textField>
				<reportElement x="-1" y="148" width="327" height="22"/>
				<textElement>
					<font fontName="DejaVu Sans" size="14" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Factura Nº " + $F{factura-numero}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="-1" y="176" width="38" height="15"/>
				<textElement>
					<font fontName="DejaVu Sans" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Fecha]]></text>
			</staticText>
			<staticText>
				<reportElement x="-1" y="192" width="117" height="15"/>
				<textElement>
					<font fontName="DejaVu Sans" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Persona de Contacto]]></text>
			</staticText>
			<textField>
				<reportElement x="-1" y="88" width="301" height="47"/>
				<textElement>
					<font fontName="DejaVu Sans" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{customer-calle1}.toUpperCase() + "\r" +
$F{customer-cp} + " " + $F{customer-ciudad}.toUpperCase() + "\r" +
$F{customer-provincia}.toUpperCase()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="116" y="192" width="295" height="15"/>
				<textElement>
					<font fontName="DejaVu Sans"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{factura-comercial_display_name}]]></textFieldExpression>
			</textField>
			<image hAlign="Right">
				<reportElement x="326" y="0" width="188" height="64"/>
				<imageExpression class="java.lang.String"><![CDATA[$F{company-logo}]]></imageExpression>
			</image>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="39" y="176" width="123" height="15"/>
				<textElement>
					<font fontName="DejaVu Sans" size="9"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{factura-fecha}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="-1" y="74" width="301" height="15"/>
				<textElement>
					<font fontName="DejaVu Sans" size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{customer-nombre}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement x="274" y="0" width="65" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="DejaVu Sans" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Precio]]></text>
			</staticText>
			<staticText>
				<reportElement x="341" y="0" width="40" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="DejaVu Sans" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[%Desc]]></text>
			</staticText>
			<staticText>
				<reportElement x="222" y="0" width="51" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="DejaVu Sans" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Cantidad]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="221" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="DejaVu Sans" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Descripción]]></text>
			</staticText>
			<staticText>
				<reportElement x="450" y="0" width="65" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="DejaVu Sans" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Importe]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="17" width="515" height="1"/>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement x="382" y="0" width="65" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="DejaVu Sans" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Precio U]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<printWhenExpression><![CDATA[$F{linea-referencia}.equals("DPP")?Boolean.FALSE:Boolean.TRUE]]></printWhenExpression>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="1" y="0" width="221" height="15"/>
				<textElement>
					<font fontName="DejaVu Sans" size="9" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{Producto-name}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="275" y="0" width="65" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="9" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{Subtotal-subtotal}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00 %" isBlankWhenNull="true">
				<reportElement x="342" y="0" width="40" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[0.00]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="223" y="0" width="50" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="9" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{Cantidad-qty}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="383" y="0" width="65" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="9" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{Subtotal-subtotal}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00 ¤" isBlankWhenNull="true">
				<reportElement x="451" y="0" width="65" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="9" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{Subtotal-subtotal}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="172" splitType="Stretch">
			<staticText>
				<reportElement x="314" y="36" width="119" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<textField pattern="#,##0.00 ¤" isBlankWhenNull="true">
				<reportElement x="443" y="36" width="73" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{total-factura}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1" y="26" width="283" height="15"/>
				<textElement>
					<font fontName="DejaVu Sans" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Forma de pago:  " + $F{Plazo_de_pago-name}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00 ¤" isBlankWhenNull="true">
				<reportElement x="443" y="8" width="73" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{total-baseimponible}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1" y="9" width="276" height="15"/>
				<textElement>
					<font fontName="DejaVu Sans"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Tipo de Contrato:  " + $F{factura-tipo_contrato}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Transparent" x="314" y="22" width="119" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="DejaVu Sans" size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Impuesto]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Transparent" x="314" y="8" width="119" height="15"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="DejaVu Sans" size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Total sin Impuestos]]></text>
			</staticText>
			<textField pattern="#,##0.00 ¤" isBlankWhenNull="true">
				<reportElement x="443" y="22" width="73" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{total-impuesto}]]></textFieldExpression>
			</textField>
			<subreport>
				<reportElement mode="Opaque" x="85" y="42" width="176" height="73" backcolor="#FFFFFF"/>
				<subreportParameter name="FACTURA">
					<subreportParameterExpression><![CDATA[$F{factura-id}]]></subreportParameterExpression>
				</subreportParameter>
				<dataSourceExpression><![CDATA[$P{SUBREPORT_VENCIMIENTOS}]]></dataSourceExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "acp_invoice_vencimiento_expbu_jasper.jasper"]]></subreportExpression>
			</subreport>
			<staticText>
				<reportElement x="2" y="43" width="80" height="15"/>
				<textElement>
					<font fontName="DejaVu Sans"/>
				</textElement>
				<text><![CDATA[Vencimientos:]]></text>
			</staticText>
		</band>
	</columnFooter>
	<pageFooter>
		<band height="53" splitType="Stretch">
			<textField evaluationTime="Report">
				<reportElement x="488" y="3" width="21" height="14"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="416" y="3" width="80" height="14"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Pág. "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="2" y="5" width="282" height="15" forecolor="#808080"/>
				<textElement>
					<font fontName="DejaVu Sans" size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{company-nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1" y="22" width="513" height="29" forecolor="#C0C0C0"/>
				<textElement>
					<font fontName="DejaVu Sans" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{company-calle1}+ ", " + $F{company-cp} + " - " + $F{company-provincia} + " - Tel. " + $F{company-phone}+ "\r" +
"CIF " + $F{company-nif} + "  " + $F{company-datos_registro} + "\r" +
$F{company-website} + "  -  " +$F{company-email}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
